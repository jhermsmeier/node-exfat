(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.ExFAT=f()}})((function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,(function(r){var n=e[i][1][r];return o(n||r)}),p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){var ExFAT=require("../exfat");var fs=require("fs");var path=require("path").posix;class Fs{constructor(volume){this.volume=volume;this.queue=[]}readdir(path,options,callback){if(typeof options=="function")return this.readdir(path,null,callback);var error=new Error("ExFAT.fs.readdir() not implemented");callback.call(this,error)}readFile(path,options,callback){if(typeof options=="function")return this.readFile(path,null,callback);var error=new Error("ExFAT.fs.readFile() not implemented");callback.call(this,error)}}module.exports=Fs},{"../exfat":10,fs:15,path:19}],2:[function(require,module,exports){var async=module.exports;async.series=function(tasks,callback){var tasks=tasks.slice();var run=error=>{var task=tasks.shift();error||task==null?callback(error):task(run)};run()};async.whilst=(condition,fn,callback)=>{var run=error=>{if(!error&&condition()){fn(run)}else{callback(error)}};run()};async.forEach=(list,fn,callback)=>{var items=list.slice();var run=error=>{var item=items.shift();error||item==null?callback(error):fn(item,run)};run()};async.forEachParallel=(list,fn,callback)=>{var count=list.length;var errors=[];var done=error=>{if(error){errors.push(error)}count-=1;if(count==0){callback(errors)}};for(var i=0;i<list.length;i++){fn(list[i],done)}};async.parallel=(tasks,callback)=>{var count=tasks.length;var errors=[];var done=error=>{if(error){errors.push(error)}count-=1;if(count==0){callback(errors)}};for(var i=0;i<tasks.length;i++){tasks[i](done)}}},{}],3:[function(require,module,exports){(function(Buffer){var ExFAT=require("../exfat");class Bitmap extends ExFAT.DirEntry{constructor(){super();this.type=ExFAT.ENTRY.BITMAP;this.unknown1=Buffer.alloc(19);this.cluster=0;this.size=0x0000000000000000n}static read(instance,buffer,offset){if(Buffer.isBuffer(instance))return Bitmap.read(new Bitmap,instance,buffer);instance=instance||new Bitmap;offset=offset||0;instance.type=buffer.readUInt8(offset+0);buffer.copy(instance.unknown1,0,offset+1,offset+20);instance.cluster=buffer.readUInt32LE(offset+20);instance.size=buffer.readBigUInt64LE(offset+24);return instance}static write(instance,buffer,offset){offset=offset||0;buffer=buffer||Buffer.alloc(ExFAT.DirEntry.SIZE+offset);offset=buffer.writeUInt8(instance.type,offset);offset+=instance.unknown1.copy(buffer,offset,0,19);offset=buffer.writeUInt32LE(instance.cluster,offset);offset=buffer.writeBigUInt64LE(instance.size,offset);return buffer}}module.exports=Bitmap}).call(this,require("buffer").Buffer)},{"../exfat":10,buffer:16}],4:[function(require,module,exports){(function(Buffer){var ExFAT=require("../exfat");class FileInfo extends ExFAT.DirEntry{constructor(){super();this.type=ExFAT.ENTRY.FILE_INFO;this.flags=0;this.reserved1=0;this.nameLength=0;this.nameHash=0;this.reserved2=0;this.validSize=0x0000000000000000n;this.reserved3=0;this.cluster=0;this.size=0x0000000000000000n}static read(instance,buffer,offset){if(Buffer.isBuffer(instance))return FileInfo.read(new FileInfo,instance,buffer);instance=instance||new FileInfo;offset=offset||0;instance.type=buffer.readUInt8(offset+0);instance.flags=buffer.readUInt8(offset+1);instance.reserved1=buffer.readUInt8(offset+2);instance.nameLength=buffer.readUInt8(offset+3);instance.nameHash=buffer.readUInt16LE(offset+4);instance.reserved2=buffer.readUInt16LE(offset+6);instance.validSize=buffer.readBigUInt64LE(offset+8);instance.reserved3=buffer.readUInt32LE(offset+16);instance.cluster=buffer.readUInt32LE(offset+20);instance.size=buffer.readBigUInt64LE(offset+24);return instance}static write(instance,buffer,offset){offset=offset||0;buffer=buffer||Buffer.alloc(ExFAT.DirEntry.SIZE+offset);offset=buffer.writeUInt8(instance.type,offset);offset=buffer.writeUInt8(instance.flags,offset);offset=buffer.writeUInt8(instance.reserved1,offset);offset=buffer.writeUInt8(instance.nameLength,offset);offset=buffer.writeUInt16LE(instance.nameHash,offset);offset=buffer.writeUInt16LE(instance.reserved2,offset);offset=buffer.writeBigUInt64LE(instance.validSize,offset);offset=buffer.writeUInt32LE(instance.reserved3,offset);offset=buffer.writeUInt32LE(instance.cluster,offset);offset=buffer.writeBigUInt64LE(instance.size,offset);return buffer}}module.exports=FileInfo}).call(this,require("buffer").Buffer)},{"../exfat":10,buffer:16}],5:[function(require,module,exports){(function(Buffer){var ExFAT=require("../exfat");class FileName extends ExFAT.DirEntry{constructor(){super();this.type=ExFAT.ENTRY.FILE_NAME;this.unknown1=0;this.value=""}static read(instance,buffer,offset){if(Buffer.isBuffer(instance))return FileName.read(new FileName,instance,buffer);instance=instance||new FileName;offset=offset||0;instance.type=buffer.readUInt8(offset+0);instance.unknown1=buffer.readUInt8(offset+1);instance.value=buffer.toString("utf16le",offset+2,offset+32);return instance}static write(instance,buffer,offset){offset=offset||0;buffer=buffer||Buffer.alloc(ExFAT.DirEntry.SIZE+offset);offset=buffer.writeUInt8(instance.type,offset);offset=buffer.writeUInt8(instance.unknown1,offset);buffer.fill(0,offset,offset+30);offset+=buffer.write(instance.value,offset,30,"utf16le");return buffer}}module.exports=FileName}).call(this,require("buffer").Buffer)},{"../exfat":10,buffer:16}],6:[function(require,module,exports){(function(Buffer){var ExFAT=require("../exfat");class File extends ExFAT.DirEntry{constructor(){super();this.type=ExFAT.ENTRY.FILE;this.continuations=0;this.checksum=0;this.attr=0;this.unknown1=0;this.crtime=0;this.crdate=0;this.mtime=0;this.mdate=0;this.atime=0;this.adate=0;this.crtimeCs=0;this.mtimeCs=0;this.unknown2=Buffer.alloc(10)}static read(instance,buffer,offset){if(Buffer.isBuffer(instance))return File.read(new File,instance,buffer);instance=instance||new File;offset=offset||0;instance.type=buffer.readUInt8(offset+0);instance.continuations=buffer.readUInt8(offset+1);instance.checksum=buffer.readUInt16LE(offset+2);instance.attr=buffer.readUInt16LE(offset+4);instance.unknown1=buffer.readUInt16LE(offset+6);instance.crtime=buffer.readUInt16LE(offset+8);instance.crdate=buffer.readUInt16LE(offset+10);instance.mtime=buffer.readUInt16LE(offset+12);instance.mdate=buffer.readUInt16LE(offset+14);instance.atime=buffer.readUInt16LE(offset+16);instance.adate=buffer.readUInt16LE(offset+18);instance.crtimeCs=buffer.readUInt8(offset+20);instance.mtimeCs=buffer.readUInt8(offset+21);buffer.copy(instance.unknown2,0,offset+22,offset+32);return instance}static write(instance,buffer,offset){offset=offset||0;buffer=buffer||Buffer.alloc(ExFAT.DirEntry.SIZE+offset);offset=buffer.writeUInt8(instance.type,offset);offset=buffer.writeUInt8(instance.continuations,offset);offset=buffer.writeUInt16(instance.checksum,offset);offset=buffer.writeUInt16LE(instance.attr,offset);offset=buffer.writeUInt16LE(instance.unknown1,offset);offset=buffer.writeUInt16LE(instance.crtime,offset);offset=buffer.writeUInt16LE(instance.crdate,offset);offset=buffer.writeUInt16LE(instance.mtime,offset);offset=buffer.writeUInt16LE(instance.mdate,offset);offset=buffer.writeUInt16LE(instance.atime,offset);offset=buffer.writeUInt16LE(instance.adate,offset);offset=buffer.writeUInt8(instance.crtimeCs,offset);offset=buffer.writeUInt8(instance.mtimeCs,offset);offset+=instance.unknown2.copy(buffer,offset,0,32);return buffer}}module.exports=File}).call(this,require("buffer").Buffer)},{"../exfat":10,buffer:16}],7:[function(require,module,exports){var ExFAT=require("../exfat");class DirEntry{constructor(){this.type=ExFAT.ENTRY.VALID}get isValid(){return(this.type&ExFAT.ENTRY.VALID)==ExFAT.ENTRY.VALID}get isContinued(){return(this.type&ExFAT.ENTRY.CONTINUED)==ExFAT.ENTRY.CONTINUED}get isOptional(){return(this.type&ExFAT.ENTRY.OPTIONAL)==ExFAT.ENTRY.OPTIONAL}read(buffer,offset){return this.constructor.read(this,buffer,offset)}write(buffer,offset){return this.constructor.write(this,buffer,offset)}static read(buffer,offset){offset=offset||0;var type=buffer.readUInt8(offset);switch(type){case ExFAT.ENTRY.BITMAP:return DirEntry.Bitmap.read(buffer,offset);case ExFAT.ENTRY.UPCASE:return DirEntry.UpCase.read(buffer,offset);case ExFAT.ENTRY.LABEL:return DirEntry.Label.read(buffer,offset);case ExFAT.ENTRY.FILE:return DirEntry.File.read(buffer,offset);case ExFAT.ENTRY.FILE_INFO:return DirEntry.FileInfo.read(buffer,offset);case ExFAT.ENTRY.FILE_NAME:return DirEntry.FileName.read(buffer,offset);default:throw new Error(`Unknown or invalid directory entry type "0x${type.toString(16)}"`)}}static write(instance,buffer,offset){offset=offset||0;switch(instance.type){case ExFAT.ENTRY.BITMAP:return DirEntry.Bitmap.write(instance,buffer,offset);case ExFAT.ENTRY.UPCASE:return DirEntry.UpCase.write(instance,buffer,offset);case ExFAT.ENTRY.LABEL:return DirEntry.Label.write(instance,buffer,offset);case ExFAT.ENTRY.FILE:return DirEntry.File.write(instance,buffer,offset);case ExFAT.ENTRY.FILE_INFO:return DirEntry.FileInfo.write(instance,buffer,offset);case ExFAT.ENTRY.FILE_NAME:return DirEntry.FileName.write(instance,buffer,offset);default:throw new Error(`Unknown or invalid directory entry type "0x${type.toString(16)}"`)}}}module.exports=DirEntry;DirEntry.SIZE=32},{"../exfat":10}],8:[function(require,module,exports){(function(Buffer){var ExFAT=require("../exfat");class Label extends ExFAT.DirEntry{constructor(){super();this.type=ExFAT.ENTRY.LABEL;this.length=0;this.value=""}static read(instance,buffer,offset){if(Buffer.isBuffer(instance))return Label.read(new Label,instance,buffer);instance=instance||new Label;offset=offset||0;instance.type=buffer.readUInt8(offset+0);instance.length=buffer.readUInt8(offset+1);instance.value=buffer.toString("utf16le",offset+2,offset+2+Math.min(instance.length*2,30));return instance}static write(instance,buffer,offset){offset=offset||0;buffer=buffer||Buffer.alloc(ExFAT.DirEntry.SIZE+offset);offset=buffer.writeUInt8(instance.type,offset);offset=buffer.writeUInt8(instance.length,offset);buffer.fill(0,offset,offset+30);offset+=buffer.write(instance.value,offset,30,"utf16le");return buffer}}module.exports=Label}).call(this,require("buffer").Buffer)},{"../exfat":10,buffer:16}],9:[function(require,module,exports){(function(Buffer){var ExFAT=require("../exfat");class UpCase extends ExFAT.DirEntry{constructor(){super();this.type=ExFAT.ENTRY.UPCASE;this.reserved1=Buffer.alloc(3);this.checksum=0;this.reserved2=Buffer.alloc(12);this.cluster=0;this.size=0x0000000000000000n}static read(instance,buffer,offset){if(Buffer.isBuffer(instance))return UpCase.read(new UpCase,instance,buffer);instance=instance||new UpCase;offset=offset||0;instance.type=buffer.readUInt8(offset+0);buffer.copy(instance.reserved1,0,offset+1,offset+4);instance.checksum=buffer.readUInt32LE(offset+4);buffer.copy(instance.reserved2,0,offset+8,offset+20);instance.cluster=buffer.readUInt32LE(offset+20);instance.size=buffer.readBigUInt64LE(offset+24);return instance}static write(instance,buffer,offset){offset=offset||0;buffer=buffer||Buffer.alloc(ExFAT.DirEntry.SIZE+offset);offset=buffer.writeUInt8(instance.type,offset);offset+=instance.reserved1.copy(buffer,offset,0,3);offset=buffer.writeUInt32LE(instance.checksum,offset);offset+=instance.reserved2.copy(buffer,offset,0,12);offset=buffer.writeUInt32LE(instance.cluster,offset);offset=buffer.writeBigUInt64LE(instance.size,offset);return buffer}}module.exports=UpCase}).call(this,require("buffer").Buffer)},{"../exfat":10,buffer:16}],10:[function(require,module,exports){var ExFAT=module.exports;ExFAT.EPOCH=315532800;ExFAT.TYPES=[7];ExFAT.GUIDS=["EBD0A0A2-B9E5-4433-87C0-68B6B72699C7"];ExFAT.ENTRY_NAME_MAX=15;ExFAT.UPCASE_CHARS=65536;ExFAT.FLAG_ALWAYS1=1<<0;ExFAT.FLAG_CONTIGUOUS=1<<1;ExFAT.CLUSTER={FREE:0,INTERNAL:1,DATA:2,RESERVED:4294967280,END:4294967286,BAD:4294967287,EOC:4294967295};ExFAT.ATTR={READONLY:1,HIDDEN:2,SYSTEM:4,VOLUME:8,DIRECTORY:16,ARCHIVE:32};ExFAT.ENTRY={OPTIONAL:32,CONTINUED:64,VALID:128};ExFAT.ENTRY.BITMAP=1|ExFAT.ENTRY.VALID;ExFAT.ENTRY.UPCASE=2|ExFAT.ENTRY.VALID;ExFAT.ENTRY.LABEL=3|ExFAT.ENTRY.VALID;ExFAT.ENTRY.FILE=5|ExFAT.ENTRY.VALID;ExFAT.ENTRY.FILE_INFO=0|ExFAT.ENTRY.VALID|ExFAT.ENTRY.CONTINUED;ExFAT.ENTRY.FILE_NAME=1|ExFAT.ENTRY.VALID|ExFAT.ENTRY.CONTINUED;ExFAT.ENTRY.FILE_TAIL=0|ExFAT.ENTRY.VALID|ExFAT.ENTRY.CONTINUED|ExFAT.ENTRY.OPTIONAL;ExFAT.isDirEntry=function(buffer,offset){return buffer[offset]==ExFAT.ENTRY.BITMAP||buffer[offset]==ExFAT.ENTRY.UPCASE||buffer[offset]==ExFAT.ENTRY.LABEL||buffer[offset]==ExFAT.ENTRY.FILE||buffer[offset]==ExFAT.ENTRY.FILE_INFO||buffer[offset]==ExFAT.ENTRY.FILE_NAME};ExFAT.getClusterType=function(value){if(value===0){return ExFAT.CLUSTER.FREE}else if(value===1){return ExFAT.CLUSTER.INTERNAL}else if(value>=2&&value<=4294967279){return ExFAT.CLUSTER.DATA}else if(value>=4294967280&&value<=4294967285){return ExFAT.CLUSTER.RESERVED}else if(value===4294967286){return ExFAT.CLUSTER.END}else if(value===4294967287){return ExFAT.CLUSTER.BAD}else if(value>=4294967288&&value<=4294967295){return ExFAT.CLUSTER.EOC}return ExFAT.CLUSTER.UNKNOWN};ExFAT.VBR=require("./vbr");ExFAT.DirEntry=require("./direntry");ExFAT.DirEntry.Bitmap=require("./direntry/bitmap");ExFAT.DirEntry.UpCase=require("./direntry/upcase");ExFAT.DirEntry.Label=require("./direntry/label");ExFAT.DirEntry.File=require("./direntry/file");ExFAT.DirEntry.FileInfo=require("./direntry/file-info");ExFAT.DirEntry.FileName=require("./direntry/file-name");ExFAT.AllocationTable=require("./table");ExFAT.Volume=require("./volume");ExFAT.API=require("./api")},{"./api":1,"./direntry":7,"./direntry/bitmap":3,"./direntry/file":6,"./direntry/file-info":4,"./direntry/file-name":5,"./direntry/label":8,"./direntry/upcase":9,"./table":11,"./vbr":12,"./volume":13}],11:[function(require,module,exports){var ExFAT=require("./exfat");class AllocationTable{constructor(){this.bits=32;this.buffers=[];this.allocPointer=ExFAT.CLUSTER.START}read(clusterNumber,tableIndex=0){return this.buffers[tableIndex].readUInt32LE(clusterNumber*4)}write(clusterNumber,value,tableIndex=0){return this.buffers[tableIndex].writeUInt32LE(value,clusterNumber*4)}getUsage(tableIndex=0){tableIndex=tableIndex||0;var clusterCount=this.buffers[tableIndex].length/(this.bits/8);var stats={total:clusterCount,used:0,bad:0,free:0};for(var i=0;i<clusterCount;i++){let cluster=this.read(i,tableIndex);switch(cluster){case ExFAT.CLUSTER.FREE:stats.free++;break;case ExFAT.CLUSTER.BAD:stats.bad++;break;default:stats.used++;break}}return stats}getCluster(clusterNumber,tableIndex=0){var cluster=this.read(clusterNumber,tableIndex);return{number:clusterNumber,next:cluster}}getClusterChain(clusterNumber,tableIndex=0){var cluster=this.read(clusterNumber,tableIndex);var chain=[{number:clusterNumber,next:cluster}];while(cluster<=ExFAT.CLUSTER.END){clusterNumber=cluster;cluster=this.read(clusterNumber,tableIndex);chain.push({number:clusterNumber,next:cluster})}return chain}allocCluster(tailCluster){var total=this.tables[0].length/(this.bits/8)-ExFAT.CLUSTER.START;var cluster=ExFAT.CLUSTER.EOC;var clusterNumber=0;for(var i=0;i<total;i++){clusterNumber=this.allocPointer;cluster=this.read(this.allocPointer);this.allocPointer=(this.allocPointer+1)%total;if(cluster==ExFAT.CLUSTER.FREE){this.write(tailCluster,clusterNumber);this.write(clusterNumber,ExFAT.CLUSTER.EOC);return true}}return false}allocClusterChain(clusterCount,tableIndex=0){var chain=[];for(var i=0;i<clusterCount;i++){}}freeClusterChain(clusterNumber,tableIndex=0){}}module.exports=AllocationTable},{"./exfat":10}],12:[function(require,module,exports){(function(Buffer){class VBR{constructor(){this.jump=Buffer.alloc(3);this.oemName="";this.reserved1=0;this.sectorStart=0x0000000000000000n;this.sectorCount=0x0000000000000000n;this.fatSectorStart=0;this.fatSectorCount=0;this.clusterSectorStart=0;this.clusterCount=0;this.rootDirCluster=0;this.serialNumber=0;this.version={major:0,minor:0};this.volumeState=0;this.sectorBits=0;this.spcBits=0;this.fatCount=1;this.driveNumber=128;this.allocatedPercent=0;this.reserved2=Buffer.alloc(391);this.signature=43605}get sectorSize(){return 1<<this.sectorBits}get sectorsPerCluster(){return 1<<this.spcBits}get clusterSize(){return this.sectorSize*this.sectorsPerCluster}read(buffer,offset){return VBR.read(this,buffer,offset)}write(buffer,offset){return VBR.write(this,buffer,offset)}static read(instance,buffer,offset){if(Buffer.isBuffer(instance)){return VBR.read(new VBR,instance,offset)}instance=instance||new VBR;offset=offset||0;buffer.copy(instance.jump,0,offset+0,offset+3);instance.oemName=buffer.toString("ascii",offset+3,offset+11);instance.reserved1=buffer.readUInt8(offset+11);instance.sectorStart=buffer.readBigUInt64LE(offset+64);instance.sectorCount=buffer.readBigUInt64LE(offset+72);instance.fatSectorStart=buffer.readUInt32LE(offset+80);instance.fatSectorCount=buffer.readUInt32LE(offset+84);instance.clusterSectorStart=buffer.readUInt32LE(offset+88);instance.clusterCount=buffer.readUInt32LE(offset+92);instance.rootDirCluster=buffer.readUInt32LE(offset+96);instance.serialNumber=buffer.readUInt32LE(offset+100);instance.version.minor=buffer.readUInt8(offset+104);instance.version.major=buffer.readUInt8(offset+105);instance.volumeState=buffer.readUInt16LE(offset+106);instance.sectorBits=buffer.readUInt8(offset+108);instance.spcBits=buffer.readUInt8(offset+109);instance.fatCount=buffer.readUInt8(offset+110);instance.driveNumber=buffer.readUInt8(offset+111);instance.allocatedPercent=buffer.readUInt8(offset+112);buffer.copy(instance.reserved2,0,offset+113,offset+510);instance.signature=buffer.readUInt16LE(offset+510);if(instance.signature!==VBR.SIGNATURE){throw new Error(`Invalid VBR signature "0x${instance.signature.toString(16)}"`)}return instance}static write(instance,buffer,offset){offset=offset||0;buffer=buffer||Buffer.alloc(VBR.SIZE+offset);offset+=instance.jump.copy(buffer,offset,0,3);offset+=buffer.write(instance.oemName,offset,8,"ascii");offset=buffer.writeUInt8LE(instance.reserved1,offset);offset=buffer.writeBigUInt64LE(instance.sectorStart,offset);offset=buffer.writeBigUInt64LE(instance.sectorCount,offset);offset=buffer.writeUInt32LE(instance.fatSectorStart,offset);offset=buffer.writeUInt32LE(instance.fatSectorCount,offset);offset=buffer.writeUInt32LE(instance.clusterSectorStart,offset);offset=buffer.writeUInt32LE(instance.clusterCount,offset);offset=buffer.writeUInt32LE(instance.rootDirCluster,offset);offset=buffer.writeUInt32LE(instance.serialNumber,offset);offset=buffer.writeUInt8(instance.version.minor,offset);offset=buffer.writeUInt8(instance.version.major,offset);offset=buffer.writeUInt16LE(instance.volumeState,offset);offset=buffer.writeUInt8(instance.sectorBits,offset);offset=buffer.writeUInt8(instance.spcBits,offset);offset=buffer.writeUInt8(instance.fatCount,offset);offset=buffer.writeUInt8(instance.driveNumber,offset);offset=buffer.writeUInt8(instance.allocatedPercent,offset);offset+=instance.reserved2.copy(buffer,offset,0,391);offset=buffer.writeUInt16LE(instance.signature,offset);return buffer}}VBR.SIZE=512;VBR.SIGNATURE=43605;VBR.OEM_NAME="EXFAT   ";module.exports=VBR}).call(this,require("buffer").Buffer)},{buffer:16}],13:[function(require,module,exports){(function(Buffer){var Emitter=require("events");var ExFAT=require("./exfat");var async=require("./async");class Volume extends Emitter{constructor(options){super();if(options==null){throw new TypeError("ExFAT.Volume: Missing required options argument")}else if(options.device==null){throw new TypeError("ExFAT.Volume: Missing required I/O device")}this.device=options.device;this.blockSize=options.blockSize||this.device.blockSize||512;this.readOnly=options.readOnly!=null?!!options.readOnly:true;this.mounting=false;this.mounted=false;this.unmounting=false;this.record=null;this.table=null;this.fs=null}format(options,callback){callback.call(this,new Error("ExFAT.Volume#format() not implemented"))}mount(options,callback){if(typeof options=="function")return this.mount(null,options);this.mounting=true;this.mounted=false;async.series([next=>{this.readVBR((error,vbr)=>{this.vbr=vbr;next(error)})},next=>{this.readFAT(this.vbr.fatSectorStart,(error,buffer)=>{if(error==null){this.table=new ExFAT.AllocationTable;this.table.buffers=[buffer]}next(error)})}],error=>{this.mounting=false;this.mounted=error==null;this.fs=new ExFAT.API(this);callback.call(this,error);this.emit("mount")})}unmount(options,callback){if(typeof options=="function")return this.unmount(null,options);var error=new Error("ExFAT.Volume#unmount() not implemented");return void callback.call(this,error);this.unmounting=true;async.series([next=>{this.record=null;this.table.buffers.length=0;this.table=null;this.queue.length=0;this.mounted=false;next()}],error=>{this.mounted=false;this.unmounting=false;callback.call(this,error);this.emit("unmount")})}readVBR(callback){var offset=0;var length=ExFAT.VBR.SIZE;var buffer=Buffer.alloc(length);var posititon=0;this.device.read(buffer,offset,length,posititon,(error,bytesRead,buffer)=>{if(error==null&&bytesRead!=length){error=new Error(`ExFAT.readVBR: Expected ${length} bytes, read returned ${bytesRead}`)}if(error)return void callback.call(this,error,null);try{callback.call(this,null,ExFAT.VBR.read(buffer))}catch(exception){callback.call(this,exception,null)}})}writeVBR(callback){var buffer=this.vbr.write();var length=buffer.length;var posititon=0;var offset=0;this.device.write(buffer,offset,length,posititon,(error,bytesWritten,buffer)=>{if(error==null&&bytesWritten!=length){error=new Error(`ExFAT.writeVBR: Expected ${length} bytes, write returned ${bytesWritten}`)}callback.call(this,error,bytesWritten,buffer)})}readFAT(lba,callback){var offset=0;var length=this.vbr.fatSectorCount*this.blockSize;var buffer=Buffer.alloc(length);var posititon=lba*this.blockSize;this.device.read(buffer,offset,length,posititon,(error,bytesRead,buffer)=>{if(error==null&&bytesRead!=length){error=new Error(`ExFAT.readFAT: Expected ${length} bytes, read returned ${bytesRead}`)}callback.call(this,error,buffer)})}writeFAT(buffer,lba,callback){lba=lba||this.vbr.fatSectorStart;var length=this.vbr.fatSectorCount*this.blockSize;var posititon=lba*this.blockSize;var offset=0;this.device.write(buffer,offset,length,posititon,(error,bytesRead,buffer)=>{if(error==null&&bytesRead!=length){error=new Error(`ExFAT.writeFAT: Expected ${length} bytes, write returned ${bytesRead}`)}callback.call(this,error,buffer)})}readCluster(clusterNumber,buffer,offset,callback){var clusterSize=this.vbr.sectorsPerCluster*this.vbr.sectorSize;var dataRegionOffset=this.vbr.clusterSectorStart*this.vbr.sectorSize;if(buffer&&buffer.length!=clusterSize){throw new TypeError(`ExFAT.readCluster: Buffer must be at least ${clusterSize} bytes`)}var posititon=dataRegionOffset+(clusterNumber-ExFAT.CLUSTER.DATA)*clusterSize;var length=clusterSize;buffer=buffer||Buffer.alloc(length);offset=offset||0;this.device.read(buffer,offset,length,posititon,(error,bytesRead,buffer)=>{if(error==null&&bytesRead!=length){error=new Error(`ExFAT.readCluster: Expected ${length} bytes, read returned ${bytesRead}`)}callback.call(this,error,bytesRead,buffer)})}readClusterChain(clusterNumber,onCluster,callback){var clusters=this.table.getClusterChain(clusterNumber);var clusterSize=this.vbr.sectorsPerCluster*this.vbr.sectorSize;var readNextCluster=error=>{var cluster=clusters.shift();if(error||cluster==null){return void(callback&&callback.call(this,error))}this.readCluster(cluster.number,null,0,(error,bytesRead,buffer)=>{onCluster.call(this,bytesRead,buffer,readNextCluster)})};readNextCluster()}readDirEntries(clusterNumber,callback){var clusters=this.table.getClusterChain(clusterNumber);var clusterSize=this.vbr.sectorsPerCluster*this.vbr.sectorSize;var buffer=Buffer.alloc(clusterSize);var offset=0;var dirEntries=[];var readNextCluster=error=>{var cluster=clusters.shift();if(error||cluster==null){return void callback.call(this,error,dirEntries)}this.readCluster(cluster.number,buffer,offset,(error,bytesRead,buffer)=>{if(error)return readNextCluster(error);for(var offset=0;offset<bytesRead;offset+=ExFAT.DirEntry.SIZE){if(!ExFAT.isDirEntry(buffer,offset))continue;dirEntries.push(ExFAT.DirEntry.read(buffer,offset))}readNextCluster()})};readNextCluster()}readUpCaseTable(clusterNumber,callback){this.readDirEntries(clusterNumber,(error,dirEntries)=>{if(error)return void callback.call(this,error);var upcase=dirEntries.find(entry=>entry.type==ExFAT.ENTRY.UPCASE);if(upcase==null){error=new Error(`ExFAT.readUpCaseTable: No UpCase table found`);return void callback.call(this,error)}var chunks=[];this.readClusterChain(upcase.cluster,(bytesRead,buffer,next)=>{chunks.push(buffer);next()},error=>{var table=Buffer.concat(chunks,Number(upcase.size));callback.call(this,error,table)})})}readBitmap(clusterNumber,callback){this.readDirEntries(clusterNumber,(error,dirEntries)=>{if(error)return void callback.call(this,error);var bitmap=dirEntries.find(entry=>entry.type==ExFAT.ENTRY.BITMAP);if(bitmap==null){error=new Error(`ExFAT.readBitmap: No cluster bitmap found`);return void callback.call(this,error)}var chunks=[];this.readClusterChain(bitmap.cluster,(bytesRead,buffer,next)=>{chunks.push(buffer);next()},error=>{var buffer=Buffer.concat(chunks,Number(bitmap.size));callback.call(this,error,buffer)})})}}module.exports=Volume}).call(this,require("buffer").Buffer)},{"./async":2,"./exfat":10,buffer:16,events:17}],14:[function(require,module,exports){"use strict";exports.byteLength=byteLength;exports.toByteArray=toByteArray;exports.fromByteArray=fromByteArray;var lookup=[];var revLookup=[];var Arr=typeof Uint8Array!=="undefined"?Uint8Array:Array;var code="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(var i=0,len=code.length;i<len;++i){lookup[i]=code[i];revLookup[code.charCodeAt(i)]=i}revLookup["-".charCodeAt(0)]=62;revLookup["_".charCodeAt(0)]=63;function getLens(b64){var len=b64.length;if(len%4>0){throw new Error("Invalid string. Length must be a multiple of 4")}var validLen=b64.indexOf("=");if(validLen===-1)validLen=len;var placeHoldersLen=validLen===len?0:4-validLen%4;return[validLen,placeHoldersLen]}function byteLength(b64){var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function _byteLength(b64,validLen,placeHoldersLen){return(validLen+placeHoldersLen)*3/4-placeHoldersLen}function toByteArray(b64){var tmp;var lens=getLens(b64);var validLen=lens[0];var placeHoldersLen=lens[1];var arr=new Arr(_byteLength(b64,validLen,placeHoldersLen));var curByte=0;var len=placeHoldersLen>0?validLen-4:validLen;var i;for(i=0;i<len;i+=4){tmp=revLookup[b64.charCodeAt(i)]<<18|revLookup[b64.charCodeAt(i+1)]<<12|revLookup[b64.charCodeAt(i+2)]<<6|revLookup[b64.charCodeAt(i+3)];arr[curByte++]=tmp>>16&255;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}if(placeHoldersLen===2){tmp=revLookup[b64.charCodeAt(i)]<<2|revLookup[b64.charCodeAt(i+1)]>>4;arr[curByte++]=tmp&255}if(placeHoldersLen===1){tmp=revLookup[b64.charCodeAt(i)]<<10|revLookup[b64.charCodeAt(i+1)]<<4|revLookup[b64.charCodeAt(i+2)]>>2;arr[curByte++]=tmp>>8&255;arr[curByte++]=tmp&255}return arr}function tripletToBase64(num){return lookup[num>>18&63]+lookup[num>>12&63]+lookup[num>>6&63]+lookup[num&63]}function encodeChunk(uint8,start,end){var tmp;var output=[];for(var i=start;i<end;i+=3){tmp=(uint8[i]<<16&16711680)+(uint8[i+1]<<8&65280)+(uint8[i+2]&255);output.push(tripletToBase64(tmp))}return output.join("")}function fromByteArray(uint8){var tmp;var len=uint8.length;var extraBytes=len%3;var parts=[];var maxChunkLength=16383;for(var i=0,len2=len-extraBytes;i<len2;i+=maxChunkLength){parts.push(encodeChunk(uint8,i,i+maxChunkLength>len2?len2:i+maxChunkLength))}if(extraBytes===1){tmp=uint8[len-1];parts.push(lookup[tmp>>2]+lookup[tmp<<4&63]+"==")}else if(extraBytes===2){tmp=(uint8[len-2]<<8)+uint8[len-1];parts.push(lookup[tmp>>10]+lookup[tmp>>4&63]+lookup[tmp<<2&63]+"=")}return parts.join("")}},{}],15:[function(require,module,exports){},{}],16:[function(require,module,exports){(function(Buffer){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
"use strict";var base64=require("base64-js");var ieee754=require("ieee754");var customInspectSymbol=typeof Symbol==="function"&&typeof Symbol.for==="function"?Symbol.for("nodejs.util.inspect.custom"):null;exports.Buffer=Buffer;exports.SlowBuffer=SlowBuffer;exports.INSPECT_MAX_BYTES=50;var K_MAX_LENGTH=2147483647;exports.kMaxLength=K_MAX_LENGTH;Buffer.TYPED_ARRAY_SUPPORT=typedArraySupport();if(!Buffer.TYPED_ARRAY_SUPPORT&&typeof console!=="undefined"&&typeof console.error==="function"){console.error("This browser lacks typed array (Uint8Array) support which is required by "+"`buffer` v5.x. Use `buffer` v4.x if you require old browser support.")}function typedArraySupport(){try{var arr=new Uint8Array(1);var proto={foo:function(){return 42}};Object.setPrototypeOf(proto,Uint8Array.prototype);Object.setPrototypeOf(arr,proto);return arr.foo()===42}catch(e){return false}}Object.defineProperty(Buffer.prototype,"parent",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.buffer}});Object.defineProperty(Buffer.prototype,"offset",{enumerable:true,get:function(){if(!Buffer.isBuffer(this))return undefined;return this.byteOffset}});function createBuffer(length){if(length>K_MAX_LENGTH){throw new RangeError('The value "'+length+'" is invalid for option "size"')}var buf=new Uint8Array(length);Object.setPrototypeOf(buf,Buffer.prototype);return buf}function Buffer(arg,encodingOrOffset,length){if(typeof arg==="number"){if(typeof encodingOrOffset==="string"){throw new TypeError('The "string" argument must be of type string. Received type number')}return allocUnsafe(arg)}return from(arg,encodingOrOffset,length)}if(typeof Symbol!=="undefined"&&Symbol.species!=null&&Buffer[Symbol.species]===Buffer){Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:true,enumerable:false,writable:false})}Buffer.poolSize=8192;function from(value,encodingOrOffset,length){if(typeof value==="string"){return fromString(value,encodingOrOffset)}if(ArrayBuffer.isView(value)){return fromArrayLike(value)}if(value==null){throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}if(isInstance(value,ArrayBuffer)||value&&isInstance(value.buffer,ArrayBuffer)){return fromArrayBuffer(value,encodingOrOffset,length)}if(typeof value==="number"){throw new TypeError('The "value" argument must not be of type number. Received type number')}var valueOf=value.valueOf&&value.valueOf();if(valueOf!=null&&valueOf!==value){return Buffer.from(valueOf,encodingOrOffset,length)}var b=fromObject(value);if(b)return b;if(typeof Symbol!=="undefined"&&Symbol.toPrimitive!=null&&typeof value[Symbol.toPrimitive]==="function"){return Buffer.from(value[Symbol.toPrimitive]("string"),encodingOrOffset,length)}throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, "+"or Array-like Object. Received type "+typeof value)}Buffer.from=function(value,encodingOrOffset,length){return from(value,encodingOrOffset,length)};Object.setPrototypeOf(Buffer.prototype,Uint8Array.prototype);Object.setPrototypeOf(Buffer,Uint8Array);function assertSize(size){if(typeof size!=="number"){throw new TypeError('"size" argument must be of type number')}else if(size<0){throw new RangeError('The value "'+size+'" is invalid for option "size"')}}function alloc(size,fill,encoding){assertSize(size);if(size<=0){return createBuffer(size)}if(fill!==undefined){return typeof encoding==="string"?createBuffer(size).fill(fill,encoding):createBuffer(size).fill(fill)}return createBuffer(size)}Buffer.alloc=function(size,fill,encoding){return alloc(size,fill,encoding)};function allocUnsafe(size){assertSize(size);return createBuffer(size<0?0:checked(size)|0)}Buffer.allocUnsafe=function(size){return allocUnsafe(size)};Buffer.allocUnsafeSlow=function(size){return allocUnsafe(size)};function fromString(string,encoding){if(typeof encoding!=="string"||encoding===""){encoding="utf8"}if(!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}var length=byteLength(string,encoding)|0;var buf=createBuffer(length);var actual=buf.write(string,encoding);if(actual!==length){buf=buf.slice(0,actual)}return buf}function fromArrayLike(array){var length=array.length<0?0:checked(array.length)|0;var buf=createBuffer(length);for(var i=0;i<length;i+=1){buf[i]=array[i]&255}return buf}function fromArrayBuffer(array,byteOffset,length){if(byteOffset<0||array.byteLength<byteOffset){throw new RangeError('"offset" is outside of buffer bounds')}if(array.byteLength<byteOffset+(length||0)){throw new RangeError('"length" is outside of buffer bounds')}var buf;if(byteOffset===undefined&&length===undefined){buf=new Uint8Array(array)}else if(length===undefined){buf=new Uint8Array(array,byteOffset)}else{buf=new Uint8Array(array,byteOffset,length)}Object.setPrototypeOf(buf,Buffer.prototype);return buf}function fromObject(obj){if(Buffer.isBuffer(obj)){var len=checked(obj.length)|0;var buf=createBuffer(len);if(buf.length===0){return buf}obj.copy(buf,0,0,len);return buf}if(obj.length!==undefined){if(typeof obj.length!=="number"||numberIsNaN(obj.length)){return createBuffer(0)}return fromArrayLike(obj)}if(obj.type==="Buffer"&&Array.isArray(obj.data)){return fromArrayLike(obj.data)}}function checked(length){if(length>=K_MAX_LENGTH){throw new RangeError("Attempt to allocate Buffer larger than maximum "+"size: 0x"+K_MAX_LENGTH.toString(16)+" bytes")}return length|0}function SlowBuffer(length){if(+length!=length){length=0}return Buffer.alloc(+length)}Buffer.isBuffer=function isBuffer(b){return b!=null&&b._isBuffer===true&&b!==Buffer.prototype};Buffer.compare=function compare(a,b){if(isInstance(a,Uint8Array))a=Buffer.from(a,a.offset,a.byteLength);if(isInstance(b,Uint8Array))b=Buffer.from(b,b.offset,b.byteLength);if(!Buffer.isBuffer(a)||!Buffer.isBuffer(b)){throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array')}if(a===b)return 0;var x=a.length;var y=b.length;for(var i=0,len=Math.min(x,y);i<len;++i){if(a[i]!==b[i]){x=a[i];y=b[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};Buffer.isEncoding=function isEncoding(encoding){switch(String(encoding).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return true;default:return false}};Buffer.concat=function concat(list,length){if(!Array.isArray(list)){throw new TypeError('"list" argument must be an Array of Buffers')}if(list.length===0){return Buffer.alloc(0)}var i;if(length===undefined){length=0;for(i=0;i<list.length;++i){length+=list[i].length}}var buffer=Buffer.allocUnsafe(length);var pos=0;for(i=0;i<list.length;++i){var buf=list[i];if(isInstance(buf,Uint8Array)){buf=Buffer.from(buf)}if(!Buffer.isBuffer(buf)){throw new TypeError('"list" argument must be an Array of Buffers')}buf.copy(buffer,pos);pos+=buf.length}return buffer};function byteLength(string,encoding){if(Buffer.isBuffer(string)){return string.length}if(ArrayBuffer.isView(string)||isInstance(string,ArrayBuffer)){return string.byteLength}if(typeof string!=="string"){throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. '+"Received type "+typeof string)}var len=string.length;var mustMatch=arguments.length>2&&arguments[2]===true;if(!mustMatch&&len===0)return 0;var loweredCase=false;for(;;){switch(encoding){case"ascii":case"latin1":case"binary":return len;case"utf8":case"utf-8":return utf8ToBytes(string).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return len*2;case"hex":return len>>>1;case"base64":return base64ToBytes(string).length;default:if(loweredCase){return mustMatch?-1:utf8ToBytes(string).length}encoding=(""+encoding).toLowerCase();loweredCase=true}}}Buffer.byteLength=byteLength;function slowToString(encoding,start,end){var loweredCase=false;if(start===undefined||start<0){start=0}if(start>this.length){return""}if(end===undefined||end>this.length){end=this.length}if(end<=0){return""}end>>>=0;start>>>=0;if(end<=start){return""}if(!encoding)encoding="utf8";while(true){switch(encoding){case"hex":return hexSlice(this,start,end);case"utf8":case"utf-8":return utf8Slice(this,start,end);case"ascii":return asciiSlice(this,start,end);case"latin1":case"binary":return latin1Slice(this,start,end);case"base64":return base64Slice(this,start,end);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,start,end);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(encoding+"").toLowerCase();loweredCase=true}}}Buffer.prototype._isBuffer=true;function swap(b,n,m){var i=b[n];b[n]=b[m];b[m]=i}Buffer.prototype.swap16=function swap16(){var len=this.length;if(len%2!==0){throw new RangeError("Buffer size must be a multiple of 16-bits")}for(var i=0;i<len;i+=2){swap(this,i,i+1)}return this};Buffer.prototype.swap32=function swap32(){var len=this.length;if(len%4!==0){throw new RangeError("Buffer size must be a multiple of 32-bits")}for(var i=0;i<len;i+=4){swap(this,i,i+3);swap(this,i+1,i+2)}return this};Buffer.prototype.swap64=function swap64(){var len=this.length;if(len%8!==0){throw new RangeError("Buffer size must be a multiple of 64-bits")}for(var i=0;i<len;i+=8){swap(this,i,i+7);swap(this,i+1,i+6);swap(this,i+2,i+5);swap(this,i+3,i+4)}return this};Buffer.prototype.toString=function toString(){var length=this.length;if(length===0)return"";if(arguments.length===0)return utf8Slice(this,0,length);return slowToString.apply(this,arguments)};Buffer.prototype.toLocaleString=Buffer.prototype.toString;Buffer.prototype.equals=function equals(b){if(!Buffer.isBuffer(b))throw new TypeError("Argument must be a Buffer");if(this===b)return true;return Buffer.compare(this,b)===0};Buffer.prototype.inspect=function inspect(){var str="";var max=exports.INSPECT_MAX_BYTES;str=this.toString("hex",0,max).replace(/(.{2})/g,"$1 ").trim();if(this.length>max)str+=" ... ";return"<Buffer "+str+">"};if(customInspectSymbol){Buffer.prototype[customInspectSymbol]=Buffer.prototype.inspect}Buffer.prototype.compare=function compare(target,start,end,thisStart,thisEnd){if(isInstance(target,Uint8Array)){target=Buffer.from(target,target.offset,target.byteLength)}if(!Buffer.isBuffer(target)){throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. '+"Received type "+typeof target)}if(start===undefined){start=0}if(end===undefined){end=target?target.length:0}if(thisStart===undefined){thisStart=0}if(thisEnd===undefined){thisEnd=this.length}if(start<0||end>target.length||thisStart<0||thisEnd>this.length){throw new RangeError("out of range index")}if(thisStart>=thisEnd&&start>=end){return 0}if(thisStart>=thisEnd){return-1}if(start>=end){return 1}start>>>=0;end>>>=0;thisStart>>>=0;thisEnd>>>=0;if(this===target)return 0;var x=thisEnd-thisStart;var y=end-start;var len=Math.min(x,y);var thisCopy=this.slice(thisStart,thisEnd);var targetCopy=target.slice(start,end);for(var i=0;i<len;++i){if(thisCopy[i]!==targetCopy[i]){x=thisCopy[i];y=targetCopy[i];break}}if(x<y)return-1;if(y<x)return 1;return 0};function bidirectionalIndexOf(buffer,val,byteOffset,encoding,dir){if(buffer.length===0)return-1;if(typeof byteOffset==="string"){encoding=byteOffset;byteOffset=0}else if(byteOffset>2147483647){byteOffset=2147483647}else if(byteOffset<-2147483648){byteOffset=-2147483648}byteOffset=+byteOffset;if(numberIsNaN(byteOffset)){byteOffset=dir?0:buffer.length-1}if(byteOffset<0)byteOffset=buffer.length+byteOffset;if(byteOffset>=buffer.length){if(dir)return-1;else byteOffset=buffer.length-1}else if(byteOffset<0){if(dir)byteOffset=0;else return-1}if(typeof val==="string"){val=Buffer.from(val,encoding)}if(Buffer.isBuffer(val)){if(val.length===0){return-1}return arrayIndexOf(buffer,val,byteOffset,encoding,dir)}else if(typeof val==="number"){val=val&255;if(typeof Uint8Array.prototype.indexOf==="function"){if(dir){return Uint8Array.prototype.indexOf.call(buffer,val,byteOffset)}else{return Uint8Array.prototype.lastIndexOf.call(buffer,val,byteOffset)}}return arrayIndexOf(buffer,[val],byteOffset,encoding,dir)}throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(arr,val,byteOffset,encoding,dir){var indexSize=1;var arrLength=arr.length;var valLength=val.length;if(encoding!==undefined){encoding=String(encoding).toLowerCase();if(encoding==="ucs2"||encoding==="ucs-2"||encoding==="utf16le"||encoding==="utf-16le"){if(arr.length<2||val.length<2){return-1}indexSize=2;arrLength/=2;valLength/=2;byteOffset/=2}}function read(buf,i){if(indexSize===1){return buf[i]}else{return buf.readUInt16BE(i*indexSize)}}var i;if(dir){var foundIndex=-1;for(i=byteOffset;i<arrLength;i++){if(read(arr,i)===read(val,foundIndex===-1?0:i-foundIndex)){if(foundIndex===-1)foundIndex=i;if(i-foundIndex+1===valLength)return foundIndex*indexSize}else{if(foundIndex!==-1)i-=i-foundIndex;foundIndex=-1}}}else{if(byteOffset+valLength>arrLength)byteOffset=arrLength-valLength;for(i=byteOffset;i>=0;i--){var found=true;for(var j=0;j<valLength;j++){if(read(arr,i+j)!==read(val,j)){found=false;break}}if(found)return i}}return-1}Buffer.prototype.includes=function includes(val,byteOffset,encoding){return this.indexOf(val,byteOffset,encoding)!==-1};Buffer.prototype.indexOf=function indexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,true)};Buffer.prototype.lastIndexOf=function lastIndexOf(val,byteOffset,encoding){return bidirectionalIndexOf(this,val,byteOffset,encoding,false)};function hexWrite(buf,string,offset,length){offset=Number(offset)||0;var remaining=buf.length-offset;if(!length){length=remaining}else{length=Number(length);if(length>remaining){length=remaining}}var strLen=string.length;if(length>strLen/2){length=strLen/2}for(var i=0;i<length;++i){var parsed=parseInt(string.substr(i*2,2),16);if(numberIsNaN(parsed))return i;buf[offset+i]=parsed}return i}function utf8Write(buf,string,offset,length){return blitBuffer(utf8ToBytes(string,buf.length-offset),buf,offset,length)}function asciiWrite(buf,string,offset,length){return blitBuffer(asciiToBytes(string),buf,offset,length)}function latin1Write(buf,string,offset,length){return asciiWrite(buf,string,offset,length)}function base64Write(buf,string,offset,length){return blitBuffer(base64ToBytes(string),buf,offset,length)}function ucs2Write(buf,string,offset,length){return blitBuffer(utf16leToBytes(string,buf.length-offset),buf,offset,length)}Buffer.prototype.write=function write(string,offset,length,encoding){if(offset===undefined){encoding="utf8";length=this.length;offset=0}else if(length===undefined&&typeof offset==="string"){encoding=offset;length=this.length;offset=0}else if(isFinite(offset)){offset=offset>>>0;if(isFinite(length)){length=length>>>0;if(encoding===undefined)encoding="utf8"}else{encoding=length;length=undefined}}else{throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported")}var remaining=this.length-offset;if(length===undefined||length>remaining)length=remaining;if(string.length>0&&(length<0||offset<0)||offset>this.length){throw new RangeError("Attempt to write outside buffer bounds")}if(!encoding)encoding="utf8";var loweredCase=false;for(;;){switch(encoding){case"hex":return hexWrite(this,string,offset,length);case"utf8":case"utf-8":return utf8Write(this,string,offset,length);case"ascii":return asciiWrite(this,string,offset,length);case"latin1":case"binary":return latin1Write(this,string,offset,length);case"base64":return base64Write(this,string,offset,length);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,string,offset,length);default:if(loweredCase)throw new TypeError("Unknown encoding: "+encoding);encoding=(""+encoding).toLowerCase();loweredCase=true}}};Buffer.prototype.toJSON=function toJSON(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function base64Slice(buf,start,end){if(start===0&&end===buf.length){return base64.fromByteArray(buf)}else{return base64.fromByteArray(buf.slice(start,end))}}function utf8Slice(buf,start,end){end=Math.min(buf.length,end);var res=[];var i=start;while(i<end){var firstByte=buf[i];var codePoint=null;var bytesPerSequence=firstByte>239?4:firstByte>223?3:firstByte>191?2:1;if(i+bytesPerSequence<=end){var secondByte,thirdByte,fourthByte,tempCodePoint;switch(bytesPerSequence){case 1:if(firstByte<128){codePoint=firstByte}break;case 2:secondByte=buf[i+1];if((secondByte&192)===128){tempCodePoint=(firstByte&31)<<6|secondByte&63;if(tempCodePoint>127){codePoint=tempCodePoint}}break;case 3:secondByte=buf[i+1];thirdByte=buf[i+2];if((secondByte&192)===128&&(thirdByte&192)===128){tempCodePoint=(firstByte&15)<<12|(secondByte&63)<<6|thirdByte&63;if(tempCodePoint>2047&&(tempCodePoint<55296||tempCodePoint>57343)){codePoint=tempCodePoint}}break;case 4:secondByte=buf[i+1];thirdByte=buf[i+2];fourthByte=buf[i+3];if((secondByte&192)===128&&(thirdByte&192)===128&&(fourthByte&192)===128){tempCodePoint=(firstByte&15)<<18|(secondByte&63)<<12|(thirdByte&63)<<6|fourthByte&63;if(tempCodePoint>65535&&tempCodePoint<1114112){codePoint=tempCodePoint}}}}if(codePoint===null){codePoint=65533;bytesPerSequence=1}else if(codePoint>65535){codePoint-=65536;res.push(codePoint>>>10&1023|55296);codePoint=56320|codePoint&1023}res.push(codePoint);i+=bytesPerSequence}return decodeCodePointsArray(res)}var MAX_ARGUMENTS_LENGTH=4096;function decodeCodePointsArray(codePoints){var len=codePoints.length;if(len<=MAX_ARGUMENTS_LENGTH){return String.fromCharCode.apply(String,codePoints)}var res="";var i=0;while(i<len){res+=String.fromCharCode.apply(String,codePoints.slice(i,i+=MAX_ARGUMENTS_LENGTH))}return res}function asciiSlice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i]&127)}return ret}function latin1Slice(buf,start,end){var ret="";end=Math.min(buf.length,end);for(var i=start;i<end;++i){ret+=String.fromCharCode(buf[i])}return ret}function hexSlice(buf,start,end){var len=buf.length;if(!start||start<0)start=0;if(!end||end<0||end>len)end=len;var out="";for(var i=start;i<end;++i){out+=hexSliceLookupTable[buf[i]]}return out}function utf16leSlice(buf,start,end){var bytes=buf.slice(start,end);var res="";for(var i=0;i<bytes.length;i+=2){res+=String.fromCharCode(bytes[i]+bytes[i+1]*256)}return res}Buffer.prototype.slice=function slice(start,end){var len=this.length;start=~~start;end=end===undefined?len:~~end;if(start<0){start+=len;if(start<0)start=0}else if(start>len){start=len}if(end<0){end+=len;if(end<0)end=0}else if(end>len){end=len}if(end<start)end=start;var newBuf=this.subarray(start,end);Object.setPrototypeOf(newBuf,Buffer.prototype);return newBuf};function checkOffset(offset,ext,length){if(offset%1!==0||offset<0)throw new RangeError("offset is not uint");if(offset+ext>length)throw new RangeError("Trying to access beyond buffer length")}Buffer.prototype.readUIntLE=function readUIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}return val};Buffer.prototype.readUIntBE=function readUIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){checkOffset(offset,byteLength,this.length)}var val=this[offset+--byteLength];var mul=1;while(byteLength>0&&(mul*=256)){val+=this[offset+--byteLength]*mul}return val};Buffer.prototype.readUInt8=function readUInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);return this[offset]};Buffer.prototype.readUInt16LE=function readUInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]|this[offset+1]<<8};Buffer.prototype.readUInt16BE=function readUInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);return this[offset]<<8|this[offset+1]};Buffer.prototype.readUInt32LE=function readUInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return(this[offset]|this[offset+1]<<8|this[offset+2]<<16)+this[offset+3]*16777216};Buffer.prototype.readUInt32BE=function readUInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]*16777216+(this[offset+1]<<16|this[offset+2]<<8|this[offset+3])};Buffer.prototype.readIntLE=function readIntLE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var val=this[offset];var mul=1;var i=0;while(++i<byteLength&&(mul*=256)){val+=this[offset+i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readIntBE=function readIntBE(offset,byteLength,noAssert){offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert)checkOffset(offset,byteLength,this.length);var i=byteLength;var mul=1;var val=this[offset+--i];while(i>0&&(mul*=256)){val+=this[offset+--i]*mul}mul*=128;if(val>=mul)val-=Math.pow(2,8*byteLength);return val};Buffer.prototype.readInt8=function readInt8(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,1,this.length);if(!(this[offset]&128))return this[offset];return(255-this[offset]+1)*-1};Buffer.prototype.readInt16LE=function readInt16LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset]|this[offset+1]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt16BE=function readInt16BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,2,this.length);var val=this[offset+1]|this[offset]<<8;return val&32768?val|4294901760:val};Buffer.prototype.readInt32LE=function readInt32LE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]|this[offset+1]<<8|this[offset+2]<<16|this[offset+3]<<24};Buffer.prototype.readInt32BE=function readInt32BE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return this[offset]<<24|this[offset+1]<<16|this[offset+2]<<8|this[offset+3]};Buffer.prototype.readFloatLE=function readFloatLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,true,23,4)};Buffer.prototype.readFloatBE=function readFloatBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,4,this.length);return ieee754.read(this,offset,false,23,4)};Buffer.prototype.readDoubleLE=function readDoubleLE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,true,52,8)};Buffer.prototype.readDoubleBE=function readDoubleBE(offset,noAssert){offset=offset>>>0;if(!noAssert)checkOffset(offset,8,this.length);return ieee754.read(this,offset,false,52,8)};function checkInt(buf,value,offset,ext,max,min){if(!Buffer.isBuffer(buf))throw new TypeError('"buffer" argument must be a Buffer instance');if(value>max||value<min)throw new RangeError('"value" argument is out of bounds');if(offset+ext>buf.length)throw new RangeError("Index out of range")}Buffer.prototype.writeUIntLE=function writeUIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var mul=1;var i=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUIntBE=function writeUIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;byteLength=byteLength>>>0;if(!noAssert){var maxBytes=Math.pow(2,8*byteLength)-1;checkInt(this,value,offset,byteLength,maxBytes,0)}var i=byteLength-1;var mul=1;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){this[offset+i]=value/mul&255}return offset+byteLength};Buffer.prototype.writeUInt8=function writeUInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,255,0);this[offset]=value&255;return offset+1};Buffer.prototype.writeUInt16LE=function writeUInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeUInt16BE=function writeUInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,65535,0);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeUInt32LE=function writeUInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset+3]=value>>>24;this[offset+2]=value>>>16;this[offset+1]=value>>>8;this[offset]=value&255;return offset+4};Buffer.prototype.writeUInt32BE=function writeUInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,4294967295,0);this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};Buffer.prototype.writeIntLE=function writeIntLE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=0;var mul=1;var sub=0;this[offset]=value&255;while(++i<byteLength&&(mul*=256)){if(value<0&&sub===0&&this[offset+i-1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeIntBE=function writeIntBE(value,offset,byteLength,noAssert){value=+value;offset=offset>>>0;if(!noAssert){var limit=Math.pow(2,8*byteLength-1);checkInt(this,value,offset,byteLength,limit-1,-limit)}var i=byteLength-1;var mul=1;var sub=0;this[offset+i]=value&255;while(--i>=0&&(mul*=256)){if(value<0&&sub===0&&this[offset+i+1]!==0){sub=1}this[offset+i]=(value/mul>>0)-sub&255}return offset+byteLength};Buffer.prototype.writeInt8=function writeInt8(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,1,127,-128);if(value<0)value=255+value+1;this[offset]=value&255;return offset+1};Buffer.prototype.writeInt16LE=function writeInt16LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value&255;this[offset+1]=value>>>8;return offset+2};Buffer.prototype.writeInt16BE=function writeInt16BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,2,32767,-32768);this[offset]=value>>>8;this[offset+1]=value&255;return offset+2};Buffer.prototype.writeInt32LE=function writeInt32LE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);this[offset]=value&255;this[offset+1]=value>>>8;this[offset+2]=value>>>16;this[offset+3]=value>>>24;return offset+4};Buffer.prototype.writeInt32BE=function writeInt32BE(value,offset,noAssert){value=+value;offset=offset>>>0;if(!noAssert)checkInt(this,value,offset,4,2147483647,-2147483648);if(value<0)value=4294967295+value+1;this[offset]=value>>>24;this[offset+1]=value>>>16;this[offset+2]=value>>>8;this[offset+3]=value&255;return offset+4};function checkIEEE754(buf,value,offset,ext,max,min){if(offset+ext>buf.length)throw new RangeError("Index out of range");if(offset<0)throw new RangeError("Index out of range")}function writeFloat(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,4,34028234663852886e22,-34028234663852886e22)}ieee754.write(buf,value,offset,littleEndian,23,4);return offset+4}Buffer.prototype.writeFloatLE=function writeFloatLE(value,offset,noAssert){return writeFloat(this,value,offset,true,noAssert)};Buffer.prototype.writeFloatBE=function writeFloatBE(value,offset,noAssert){return writeFloat(this,value,offset,false,noAssert)};function writeDouble(buf,value,offset,littleEndian,noAssert){value=+value;offset=offset>>>0;if(!noAssert){checkIEEE754(buf,value,offset,8,17976931348623157e292,-17976931348623157e292)}ieee754.write(buf,value,offset,littleEndian,52,8);return offset+8}Buffer.prototype.writeDoubleLE=function writeDoubleLE(value,offset,noAssert){return writeDouble(this,value,offset,true,noAssert)};Buffer.prototype.writeDoubleBE=function writeDoubleBE(value,offset,noAssert){return writeDouble(this,value,offset,false,noAssert)};Buffer.prototype.copy=function copy(target,targetStart,start,end){if(!Buffer.isBuffer(target))throw new TypeError("argument should be a Buffer");if(!start)start=0;if(!end&&end!==0)end=this.length;if(targetStart>=target.length)targetStart=target.length;if(!targetStart)targetStart=0;if(end>0&&end<start)end=start;if(end===start)return 0;if(target.length===0||this.length===0)return 0;if(targetStart<0){throw new RangeError("targetStart out of bounds")}if(start<0||start>=this.length)throw new RangeError("Index out of range");if(end<0)throw new RangeError("sourceEnd out of bounds");if(end>this.length)end=this.length;if(target.length-targetStart<end-start){end=target.length-targetStart+start}var len=end-start;if(this===target&&typeof Uint8Array.prototype.copyWithin==="function"){this.copyWithin(targetStart,start,end)}else if(this===target&&start<targetStart&&targetStart<end){for(var i=len-1;i>=0;--i){target[i+targetStart]=this[i+start]}}else{Uint8Array.prototype.set.call(target,this.subarray(start,end),targetStart)}return len};Buffer.prototype.fill=function fill(val,start,end,encoding){if(typeof val==="string"){if(typeof start==="string"){encoding=start;start=0;end=this.length}else if(typeof end==="string"){encoding=end;end=this.length}if(encoding!==undefined&&typeof encoding!=="string"){throw new TypeError("encoding must be a string")}if(typeof encoding==="string"&&!Buffer.isEncoding(encoding)){throw new TypeError("Unknown encoding: "+encoding)}if(val.length===1){var code=val.charCodeAt(0);if(encoding==="utf8"&&code<128||encoding==="latin1"){val=code}}}else if(typeof val==="number"){val=val&255}else if(typeof val==="boolean"){val=Number(val)}if(start<0||this.length<start||this.length<end){throw new RangeError("Out of range index")}if(end<=start){return this}start=start>>>0;end=end===undefined?this.length:end>>>0;if(!val)val=0;var i;if(typeof val==="number"){for(i=start;i<end;++i){this[i]=val}}else{var bytes=Buffer.isBuffer(val)?val:Buffer.from(val,encoding);var len=bytes.length;if(len===0){throw new TypeError('The value "'+val+'" is invalid for argument "value"')}for(i=0;i<end-start;++i){this[i+start]=bytes[i%len]}}return this};var INVALID_BASE64_RE=/[^+/0-9A-Za-z-_]/g;function base64clean(str){str=str.split("=")[0];str=str.trim().replace(INVALID_BASE64_RE,"");if(str.length<2)return"";while(str.length%4!==0){str=str+"="}return str}function utf8ToBytes(string,units){units=units||Infinity;var codePoint;var length=string.length;var leadSurrogate=null;var bytes=[];for(var i=0;i<length;++i){codePoint=string.charCodeAt(i);if(codePoint>55295&&codePoint<57344){if(!leadSurrogate){if(codePoint>56319){if((units-=3)>-1)bytes.push(239,191,189);continue}else if(i+1===length){if((units-=3)>-1)bytes.push(239,191,189);continue}leadSurrogate=codePoint;continue}if(codePoint<56320){if((units-=3)>-1)bytes.push(239,191,189);leadSurrogate=codePoint;continue}codePoint=(leadSurrogate-55296<<10|codePoint-56320)+65536}else if(leadSurrogate){if((units-=3)>-1)bytes.push(239,191,189)}leadSurrogate=null;if(codePoint<128){if((units-=1)<0)break;bytes.push(codePoint)}else if(codePoint<2048){if((units-=2)<0)break;bytes.push(codePoint>>6|192,codePoint&63|128)}else if(codePoint<65536){if((units-=3)<0)break;bytes.push(codePoint>>12|224,codePoint>>6&63|128,codePoint&63|128)}else if(codePoint<1114112){if((units-=4)<0)break;bytes.push(codePoint>>18|240,codePoint>>12&63|128,codePoint>>6&63|128,codePoint&63|128)}else{throw new Error("Invalid code point")}}return bytes}function asciiToBytes(str){var byteArray=[];for(var i=0;i<str.length;++i){byteArray.push(str.charCodeAt(i)&255)}return byteArray}function utf16leToBytes(str,units){var c,hi,lo;var byteArray=[];for(var i=0;i<str.length;++i){if((units-=2)<0)break;c=str.charCodeAt(i);hi=c>>8;lo=c%256;byteArray.push(lo);byteArray.push(hi)}return byteArray}function base64ToBytes(str){return base64.toByteArray(base64clean(str))}function blitBuffer(src,dst,offset,length){for(var i=0;i<length;++i){if(i+offset>=dst.length||i>=src.length)break;dst[i+offset]=src[i]}return i}function isInstance(obj,type){return obj instanceof type||obj!=null&&obj.constructor!=null&&obj.constructor.name!=null&&obj.constructor.name===type.name}function numberIsNaN(obj){return obj!==obj}var hexSliceLookupTable=function(){var alphabet="0123456789abcdef";var table=new Array(256);for(var i=0;i<16;++i){var i16=i*16;for(var j=0;j<16;++j){table[i16+j]=alphabet[i]+alphabet[j]}}return table}()}).call(this,require("buffer").Buffer)},{"base64-js":14,buffer:16,ieee754:18}],17:[function(require,module,exports){var objectCreate=Object.create||objectCreatePolyfill;var objectKeys=Object.keys||objectKeysPolyfill;var bind=Function.prototype.bind||functionBindPolyfill;function EventEmitter(){if(!this._events||!Object.prototype.hasOwnProperty.call(this,"_events")){this._events=objectCreate(null);this._eventsCount=0}this._maxListeners=this._maxListeners||undefined}module.exports=EventEmitter;EventEmitter.EventEmitter=EventEmitter;EventEmitter.prototype._events=undefined;EventEmitter.prototype._maxListeners=undefined;var defaultMaxListeners=10;var hasDefineProperty;try{var o={};if(Object.defineProperty)Object.defineProperty(o,"x",{value:0});hasDefineProperty=o.x===0}catch(err){hasDefineProperty=false}if(hasDefineProperty){Object.defineProperty(EventEmitter,"defaultMaxListeners",{enumerable:true,get:function(){return defaultMaxListeners},set:function(arg){if(typeof arg!=="number"||arg<0||arg!==arg)throw new TypeError('"defaultMaxListeners" must be a positive number');defaultMaxListeners=arg}})}else{EventEmitter.defaultMaxListeners=defaultMaxListeners}EventEmitter.prototype.setMaxListeners=function setMaxListeners(n){if(typeof n!=="number"||n<0||isNaN(n))throw new TypeError('"n" argument must be a positive number');this._maxListeners=n;return this};function $getMaxListeners(that){if(that._maxListeners===undefined)return EventEmitter.defaultMaxListeners;return that._maxListeners}EventEmitter.prototype.getMaxListeners=function getMaxListeners(){return $getMaxListeners(this)};function emitNone(handler,isFn,self){if(isFn)handler.call(self);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self)}}function emitOne(handler,isFn,self,arg1){if(isFn)handler.call(self,arg1);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1)}}function emitTwo(handler,isFn,self,arg1,arg2){if(isFn)handler.call(self,arg1,arg2);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1,arg2)}}function emitThree(handler,isFn,self,arg1,arg2,arg3){if(isFn)handler.call(self,arg1,arg2,arg3);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].call(self,arg1,arg2,arg3)}}function emitMany(handler,isFn,self,args){if(isFn)handler.apply(self,args);else{var len=handler.length;var listeners=arrayClone(handler,len);for(var i=0;i<len;++i)listeners[i].apply(self,args)}}EventEmitter.prototype.emit=function emit(type){var er,handler,len,args,i,events;var doError=type==="error";events=this._events;if(events)doError=doError&&events.error==null;else if(!doError)return false;if(doError){if(arguments.length>1)er=arguments[1];if(er instanceof Error){throw er}else{var err=new Error('Unhandled "error" event. ('+er+")");err.context=er;throw err}return false}handler=events[type];if(!handler)return false;var isFn=typeof handler==="function";len=arguments.length;switch(len){case 1:emitNone(handler,isFn,this);break;case 2:emitOne(handler,isFn,this,arguments[1]);break;case 3:emitTwo(handler,isFn,this,arguments[1],arguments[2]);break;case 4:emitThree(handler,isFn,this,arguments[1],arguments[2],arguments[3]);break;default:args=new Array(len-1);for(i=1;i<len;i++)args[i-1]=arguments[i];emitMany(handler,isFn,this,args)}return true};function _addListener(target,type,listener,prepend){var m;var events;var existing;if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');events=target._events;if(!events){events=target._events=objectCreate(null);target._eventsCount=0}else{if(events.newListener){target.emit("newListener",type,listener.listener?listener.listener:listener);events=target._events}existing=events[type]}if(!existing){existing=events[type]=listener;++target._eventsCount}else{if(typeof existing==="function"){existing=events[type]=prepend?[listener,existing]:[existing,listener]}else{if(prepend){existing.unshift(listener)}else{existing.push(listener)}}if(!existing.warned){m=$getMaxListeners(target);if(m&&m>0&&existing.length>m){existing.warned=true;var w=new Error("Possible EventEmitter memory leak detected. "+existing.length+' "'+String(type)+'" listeners '+"added. Use emitter.setMaxListeners() to "+"increase limit.");w.name="MaxListenersExceededWarning";w.emitter=target;w.type=type;w.count=existing.length;if(typeof console==="object"&&console.warn){console.warn("%s: %s",w.name,w.message)}}}}return target}EventEmitter.prototype.addListener=function addListener(type,listener){return _addListener(this,type,listener,false)};EventEmitter.prototype.on=EventEmitter.prototype.addListener;EventEmitter.prototype.prependListener=function prependListener(type,listener){return _addListener(this,type,listener,true)};function onceWrapper(){if(!this.fired){this.target.removeListener(this.type,this.wrapFn);this.fired=true;switch(arguments.length){case 0:return this.listener.call(this.target);case 1:return this.listener.call(this.target,arguments[0]);case 2:return this.listener.call(this.target,arguments[0],arguments[1]);case 3:return this.listener.call(this.target,arguments[0],arguments[1],arguments[2]);default:var args=new Array(arguments.length);for(var i=0;i<args.length;++i)args[i]=arguments[i];this.listener.apply(this.target,args)}}}function _onceWrap(target,type,listener){var state={fired:false,wrapFn:undefined,target:target,type:type,listener:listener};var wrapped=bind.call(onceWrapper,state);wrapped.listener=listener;state.wrapFn=wrapped;return wrapped}EventEmitter.prototype.once=function once(type,listener){if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');this.on(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.prependOnceListener=function prependOnceListener(type,listener){if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');this.prependListener(type,_onceWrap(this,type,listener));return this};EventEmitter.prototype.removeListener=function removeListener(type,listener){var list,events,position,i,originalListener;if(typeof listener!=="function")throw new TypeError('"listener" argument must be a function');events=this._events;if(!events)return this;list=events[type];if(!list)return this;if(list===listener||list.listener===listener){if(--this._eventsCount===0)this._events=objectCreate(null);else{delete events[type];if(events.removeListener)this.emit("removeListener",type,list.listener||listener)}}else if(typeof list!=="function"){position=-1;for(i=list.length-1;i>=0;i--){if(list[i]===listener||list[i].listener===listener){originalListener=list[i].listener;position=i;break}}if(position<0)return this;if(position===0)list.shift();else spliceOne(list,position);if(list.length===1)events[type]=list[0];if(events.removeListener)this.emit("removeListener",type,originalListener||listener)}return this};EventEmitter.prototype.removeAllListeners=function removeAllListeners(type){var listeners,events,i;events=this._events;if(!events)return this;if(!events.removeListener){if(arguments.length===0){this._events=objectCreate(null);this._eventsCount=0}else if(events[type]){if(--this._eventsCount===0)this._events=objectCreate(null);else delete events[type]}return this}if(arguments.length===0){var keys=objectKeys(events);var key;for(i=0;i<keys.length;++i){key=keys[i];if(key==="removeListener")continue;this.removeAllListeners(key)}this.removeAllListeners("removeListener");this._events=objectCreate(null);this._eventsCount=0;return this}listeners=events[type];if(typeof listeners==="function"){this.removeListener(type,listeners)}else if(listeners){for(i=listeners.length-1;i>=0;i--){this.removeListener(type,listeners[i])}}return this};function _listeners(target,type,unwrap){var events=target._events;if(!events)return[];var evlistener=events[type];if(!evlistener)return[];if(typeof evlistener==="function")return unwrap?[evlistener.listener||evlistener]:[evlistener];return unwrap?unwrapListeners(evlistener):arrayClone(evlistener,evlistener.length)}EventEmitter.prototype.listeners=function listeners(type){return _listeners(this,type,true)};EventEmitter.prototype.rawListeners=function rawListeners(type){return _listeners(this,type,false)};EventEmitter.listenerCount=function(emitter,type){if(typeof emitter.listenerCount==="function"){return emitter.listenerCount(type)}else{return listenerCount.call(emitter,type)}};EventEmitter.prototype.listenerCount=listenerCount;function listenerCount(type){var events=this._events;if(events){var evlistener=events[type];if(typeof evlistener==="function"){return 1}else if(evlistener){return evlistener.length}}return 0}EventEmitter.prototype.eventNames=function eventNames(){return this._eventsCount>0?Reflect.ownKeys(this._events):[]};function spliceOne(list,index){for(var i=index,k=i+1,n=list.length;k<n;i+=1,k+=1)list[i]=list[k];list.pop()}function arrayClone(arr,n){var copy=new Array(n);for(var i=0;i<n;++i)copy[i]=arr[i];return copy}function unwrapListeners(arr){var ret=new Array(arr.length);for(var i=0;i<ret.length;++i){ret[i]=arr[i].listener||arr[i]}return ret}function objectCreatePolyfill(proto){var F=function(){};F.prototype=proto;return new F}function objectKeysPolyfill(obj){var keys=[];for(var k in obj)if(Object.prototype.hasOwnProperty.call(obj,k)){keys.push(k)}return k}function functionBindPolyfill(context){var fn=this;return function(){return fn.apply(context,arguments)}}},{}],18:[function(require,module,exports){exports.read=function(buffer,offset,isLE,mLen,nBytes){var e,m;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var nBits=-7;var i=isLE?nBytes-1:0;var d=isLE?-1:1;var s=buffer[offset+i];i+=d;e=s&(1<<-nBits)-1;s>>=-nBits;nBits+=eLen;for(;nBits>0;e=e*256+buffer[offset+i],i+=d,nBits-=8){}m=e&(1<<-nBits)-1;e>>=-nBits;nBits+=mLen;for(;nBits>0;m=m*256+buffer[offset+i],i+=d,nBits-=8){}if(e===0){e=1-eBias}else if(e===eMax){return m?NaN:(s?-1:1)*Infinity}else{m=m+Math.pow(2,mLen);e=e-eBias}return(s?-1:1)*m*Math.pow(2,e-mLen)};exports.write=function(buffer,value,offset,isLE,mLen,nBytes){var e,m,c;var eLen=nBytes*8-mLen-1;var eMax=(1<<eLen)-1;var eBias=eMax>>1;var rt=mLen===23?Math.pow(2,-24)-Math.pow(2,-77):0;var i=isLE?0:nBytes-1;var d=isLE?1:-1;var s=value<0||value===0&&1/value<0?1:0;value=Math.abs(value);if(isNaN(value)||value===Infinity){m=isNaN(value)?1:0;e=eMax}else{e=Math.floor(Math.log(value)/Math.LN2);if(value*(c=Math.pow(2,-e))<1){e--;c*=2}if(e+eBias>=1){value+=rt/c}else{value+=rt*Math.pow(2,1-eBias)}if(value*c>=2){e++;c/=2}if(e+eBias>=eMax){m=0;e=eMax}else if(e+eBias>=1){m=(value*c-1)*Math.pow(2,mLen);e=e+eBias}else{m=value*Math.pow(2,eBias-1)*Math.pow(2,mLen);e=0}}for(;mLen>=8;buffer[offset+i]=m&255,i+=d,m/=256,mLen-=8){}e=e<<mLen|m;eLen+=mLen;for(;eLen>0;buffer[offset+i]=e&255,i+=d,e/=256,eLen-=8){}buffer[offset+i-d]|=s*128}},{}],19:[function(require,module,exports){(function(process){function normalizeArray(parts,allowAboveRoot){var up=0;for(var i=parts.length-1;i>=0;i--){var last=parts[i];if(last==="."){parts.splice(i,1)}else if(last===".."){parts.splice(i,1);up++}else if(up){parts.splice(i,1);up--}}if(allowAboveRoot){for(;up--;up){parts.unshift("..")}}return parts}exports.resolve=function(){var resolvedPath="",resolvedAbsolute=false;for(var i=arguments.length-1;i>=-1&&!resolvedAbsolute;i--){var path=i>=0?arguments[i]:process.cwd();if(typeof path!=="string"){throw new TypeError("Arguments to path.resolve must be strings")}else if(!path){continue}resolvedPath=path+"/"+resolvedPath;resolvedAbsolute=path.charAt(0)==="/"}resolvedPath=normalizeArray(filter(resolvedPath.split("/"),(function(p){return!!p})),!resolvedAbsolute).join("/");return(resolvedAbsolute?"/":"")+resolvedPath||"."};exports.normalize=function(path){var isAbsolute=exports.isAbsolute(path),trailingSlash=substr(path,-1)==="/";path=normalizeArray(filter(path.split("/"),(function(p){return!!p})),!isAbsolute).join("/");if(!path&&!isAbsolute){path="."}if(path&&trailingSlash){path+="/"}return(isAbsolute?"/":"")+path};exports.isAbsolute=function(path){return path.charAt(0)==="/"};exports.join=function(){var paths=Array.prototype.slice.call(arguments,0);return exports.normalize(filter(paths,(function(p,index){if(typeof p!=="string"){throw new TypeError("Arguments to path.join must be strings")}return p})).join("/"))};exports.relative=function(from,to){from=exports.resolve(from).substr(1);to=exports.resolve(to).substr(1);function trim(arr){var start=0;for(;start<arr.length;start++){if(arr[start]!=="")break}var end=arr.length-1;for(;end>=0;end--){if(arr[end]!=="")break}if(start>end)return[];return arr.slice(start,end-start+1)}var fromParts=trim(from.split("/"));var toParts=trim(to.split("/"));var length=Math.min(fromParts.length,toParts.length);var samePartsLength=length;for(var i=0;i<length;i++){if(fromParts[i]!==toParts[i]){samePartsLength=i;break}}var outputParts=[];for(var i=samePartsLength;i<fromParts.length;i++){outputParts.push("..")}outputParts=outputParts.concat(toParts.slice(samePartsLength));return outputParts.join("/")};exports.sep="/";exports.delimiter=":";exports.dirname=function(path){if(typeof path!=="string")path=path+"";if(path.length===0)return".";var code=path.charCodeAt(0);var hasRoot=code===47;var end=-1;var matchedSlash=true;for(var i=path.length-1;i>=1;--i){code=path.charCodeAt(i);if(code===47){if(!matchedSlash){end=i;break}}else{matchedSlash=false}}if(end===-1)return hasRoot?"/":".";if(hasRoot&&end===1){return"/"}return path.slice(0,end)};function basename(path){if(typeof path!=="string")path=path+"";var start=0;var end=-1;var matchedSlash=true;var i;for(i=path.length-1;i>=0;--i){if(path.charCodeAt(i)===47){if(!matchedSlash){start=i+1;break}}else if(end===-1){matchedSlash=false;end=i+1}}if(end===-1)return"";return path.slice(start,end)}exports.basename=function(path,ext){var f=basename(path);if(ext&&f.substr(-1*ext.length)===ext){f=f.substr(0,f.length-ext.length)}return f};exports.extname=function(path){if(typeof path!=="string")path=path+"";var startDot=-1;var startPart=0;var end=-1;var matchedSlash=true;var preDotState=0;for(var i=path.length-1;i>=0;--i){var code=path.charCodeAt(i);if(code===47){if(!matchedSlash){startPart=i+1;break}continue}if(end===-1){matchedSlash=false;end=i+1}if(code===46){if(startDot===-1)startDot=i;else if(preDotState!==1)preDotState=1}else if(startDot!==-1){preDotState=-1}}if(startDot===-1||end===-1||preDotState===0||preDotState===1&&startDot===end-1&&startDot===startPart+1){return""}return path.slice(startDot,end)};function filter(xs,f){if(xs.filter)return xs.filter(f);var res=[];for(var i=0;i<xs.length;i++){if(f(xs[i],i,xs))res.push(xs[i])}return res}var substr="ab".substr(-1)==="b"?function(str,start,len){return str.substr(start,len)}:function(str,start,len){if(start<0)start=str.length+start;return str.substr(start,len)}}).call(this,require("_process"))},{_process:20}],20:[function(require,module,exports){var process=module.exports={};var cachedSetTimeout;var cachedClearTimeout;function defaultSetTimout(){throw new Error("setTimeout has not been defined")}function defaultClearTimeout(){throw new Error("clearTimeout has not been defined")}(function(){try{if(typeof setTimeout==="function"){cachedSetTimeout=setTimeout}else{cachedSetTimeout=defaultSetTimout}}catch(e){cachedSetTimeout=defaultSetTimout}try{if(typeof clearTimeout==="function"){cachedClearTimeout=clearTimeout}else{cachedClearTimeout=defaultClearTimeout}}catch(e){cachedClearTimeout=defaultClearTimeout}})();function runTimeout(fun){if(cachedSetTimeout===setTimeout){return setTimeout(fun,0)}if((cachedSetTimeout===defaultSetTimout||!cachedSetTimeout)&&setTimeout){cachedSetTimeout=setTimeout;return setTimeout(fun,0)}try{return cachedSetTimeout(fun,0)}catch(e){try{return cachedSetTimeout.call(null,fun,0)}catch(e){return cachedSetTimeout.call(this,fun,0)}}}function runClearTimeout(marker){if(cachedClearTimeout===clearTimeout){return clearTimeout(marker)}if((cachedClearTimeout===defaultClearTimeout||!cachedClearTimeout)&&clearTimeout){cachedClearTimeout=clearTimeout;return clearTimeout(marker)}try{return cachedClearTimeout(marker)}catch(e){try{return cachedClearTimeout.call(null,marker)}catch(e){return cachedClearTimeout.call(this,marker)}}}var queue=[];var draining=false;var currentQueue;var queueIndex=-1;function cleanUpNextTick(){if(!draining||!currentQueue){return}draining=false;if(currentQueue.length){queue=currentQueue.concat(queue)}else{queueIndex=-1}if(queue.length){drainQueue()}}function drainQueue(){if(draining){return}var timeout=runTimeout(cleanUpNextTick);draining=true;var len=queue.length;while(len){currentQueue=queue;queue=[];while(++queueIndex<len){if(currentQueue){currentQueue[queueIndex].run()}}queueIndex=-1;len=queue.length}currentQueue=null;draining=false;runClearTimeout(timeout)}process.nextTick=function(fun){var args=new Array(arguments.length-1);if(arguments.length>1){for(var i=1;i<arguments.length;i++){args[i-1]=arguments[i]}}queue.push(new Item(fun,args));if(queue.length===1&&!draining){runTimeout(drainQueue)}};function Item(fun,array){this.fun=fun;this.array=array}Item.prototype.run=function(){this.fun.apply(null,this.array)};process.title="browser";process.browser=true;process.env={};process.argv=[];process.version="";process.versions={};function noop(){}process.on=noop;process.addListener=noop;process.once=noop;process.off=noop;process.removeListener=noop;process.removeAllListeners=noop;process.emit=noop;process.prependListener=noop;process.prependOnceListener=noop;process.listeners=function(name){return[]};process.binding=function(name){throw new Error("process.binding is not supported")};process.cwd=function(){return"/"};process.chdir=function(dir){throw new Error("process.chdir is not supported")};process.umask=function(){return 0}},{}]},{},[10])(10)}));